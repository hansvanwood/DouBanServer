# ğŸ“– è±†ç“£ç”µå½±æŸ¥è¯¢ç³»ç»Ÿ â€” API æ¥å£æ–‡æ¡£

**Base URL**ï¼š`http://localhost:8080/api`

**åœ¨çº¿æ–‡æ¡£**ï¼š`http://localhost:8080/api/doc.html`ï¼ˆKnife4jï¼‰

æ‰€æœ‰æ¥å£ç»Ÿä¸€è¿”å›æ ¼å¼å¦‚ä¸‹ã€‚æ—¥æœŸå­—æ®µç»Ÿä¸€æ ¼å¼ï¼š`yyyy-MM-dd`ï¼Œæ—¶é—´å­—æ®µç»Ÿä¸€æ ¼å¼ï¼š`yyyy-MM-dd HH:mm:ss`ã€‚

---

## ç»Ÿä¸€è¿”å›æ ¼å¼

### å•æ•°æ®è¿”å› `Result<T>`

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": { }
}
```

### åˆ†é¡µè¿”å› `PageResult<T>`

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "total": 140502,
  "pageNum": 1,
  "pageSize": 20,
  "data": [ ]
}
```

### é”™è¯¯ç 

| code | message | è¯´æ˜ |
|------|---------|------|
| 200 | æ“ä½œæˆåŠŸ | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | å‚æ•°æ ¡éªŒå¤±è´¥ |
| 404 | èµ„æºä¸å­˜åœ¨ | æ‰¾ä¸åˆ°æ•°æ® |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | å…œåº•å¼‚å¸¸ |

---

## ä¸€ã€ç”µå½±åˆ—è¡¨ï¼ˆåˆ†é¡µ + ç­›é€‰ + æ’åºï¼‰

`POST /movies/list`

### è¯·æ±‚å‚æ•°ï¼ˆJSON Bodyï¼‰

| å­—æ®µ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜                                                                              |
|------|------|------|--------|---------------------------------------------------------------------------------|
| keyword | String | å¦ | - | æ¨¡ç³Šæœç´¢ï¼ŒåŒ¹é…ç”µå½±å/åˆ«å/æ¼”å‘˜/å¯¼æ¼”                                                             |
| type | String | å¦ | - | ç”µå½±ç±»å‹ï¼Œå¦‚ `å‰§æƒ…`                                                                     |
| language | String | å¦ | - | è¯­è¨€ï¼Œå¦‚ `è‹±è¯­`                                                                       |
| region | String | å¦ | - | åˆ¶ç‰‡å›½å®¶/åœ°åŒºï¼Œå¦‚ `ç¾å›½`                                                                  |
| year | Integer | å¦ | - | ä¸Šæ˜ å¹´ä»½ï¼ˆâ‰¥1888ï¼‰                                                                     |
| minMinutes | Integer | å¦ | - | æœ€çŸ­æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼Œâ‰¥0ï¼‰                                                                     |
| maxMinutes | Integer | å¦ | - | æœ€é•¿æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼Œâ‰¥0ï¼‰                                                                     |
| sortField | String | å¦ | `douban_score` | æ’åºå­—æ®µï¼š`movie_name` / `movie_alias` / `release_date` / `minutes` / `douban_score` |
| sortOrder | String | å¦ | `desc` | æ’åºæ–¹å‘ï¼š`asc` / `desc`                                                             |
| pageNum | Integer | æ˜¯ | 1 | é¡µç ï¼ˆâ‰¥1ï¼‰                                                                          |
| pageSize | Integer | æ˜¯ | 20 | æ¯é¡µæ¡æ•°ï¼ˆ1~200ï¼‰                                                                     |

### è¯·æ±‚ç¤ºä¾‹

```json
{
  "keyword": "éœ¸ç‹åˆ«å§¬",
  "type": "å‰§æƒ…",
  "sortField": "douban_score",
  "sortOrder": "desc",
  "pageNum": 1,
  "pageSize": 10
}
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "total": 3,
  "pageNum": 1,
  "pageSize": 10,
  "data": [
    {
      "movieId": 1291546,
      "movieName": "éœ¸ç‹åˆ«å§¬",
      "movieAlias": "å†è§ï¼Œæˆ‘çš„å¦¾",
      "cover": "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p1488213971.jpg",
      "directors": "é™ˆå‡¯æ­Œ",
      "actors": "å¼ å›½è£/å¼ ä¸°æ¯…/å·©ä¿/è‘›ä¼˜/è‹±è¾¾/è’‹é›¯ä¸½",
      "doubanScore": 9.6,
      "doubanVotes": 1167141,
      "type": "å‰§æƒ…/çˆ±æƒ…/åŒæ€§",
      "languages": "æ±‰è¯­æ™®é€šè¯",
      "regions": "ä¸­å›½å¤§é™† / ä¸­å›½é¦™æ¸¯",
      "minutes": 171,
      "releaseDate": "1993-01-01 00:00:00",
      "year": 1993
    }
  ]
}
```

---

## äºŒã€ç”µå½±ç»Ÿè®¡æ•°æ®

`GET /movies/stats`

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "movieCount": 140502,
    "commentCount": 4428475,
    "workerCount": 70001
  }
}
```

---

## ä¸‰ã€ç”µå½±è¯¦æƒ…

`GET /movies/{movieId}`

### è·¯å¾„å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| movieId | Integer | ç”µå½±ID |

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "movieId": 1291546,
    "movieName": "éœ¸ç‹åˆ«å§¬",
    "movieAlias": "å†è§ï¼Œæˆ‘çš„å¦¾",
    "actors": "å¼ å›½è£/å¼ ä¸°æ¯…/å·©ä¿/è‘›ä¼˜/è‹±è¾¾/è’‹é›¯ä¸½/å´å¤§ç»´/å•é½/é›·æ±‰/å°¹æ²»",
    "cover": "https://img3.doubanio.com/view/photo/s_ratio_poster/public/p1488213971.jpg",
    "directors": "é™ˆå‡¯æ­Œ",
    "doubanScore": 9.6,
    "doubanVotes": 1167141,
    "type": "å‰§æƒ…/çˆ±æƒ…/åŒæ€§",
    "imdbId": "tt0106332",
    "languages": "æ±‰è¯­æ™®é€šè¯",
    "minutes": 171,
    "officialSite": "",
    "regions": "ä¸­å›½å¤§é™† / ä¸­å›½é¦™æ¸¯",
    "releaseDate": "1993-01-01 00:00:00",
    "description": "æ®µå°æ¥¼ï¼ˆå¼ ä¸°æ¯…ï¼‰ä¸ç¨‹è¶è¡£ï¼ˆå¼ å›½è£ï¼‰æ˜¯ä¸€å¯¹æ‰“å°ä¸€èµ·é•¿å¤§çš„å¸ˆå…„å¼Ÿ...",
    "tags": "ç»å…¸/äººæ€§/æ–‡è‰º/çˆ±æƒ…/äººç”Ÿ/åŒå¿—/å‰§æƒ…/æ–‡é©",
    "year": 1993,
    "actorIds": "å¼ å›½è£:1003494|å¼ ä¸°æ¯…:1050265|å·©ä¿:1035641",
    "directorIds": "é™ˆå‡¯æ­Œ:1023040",
    "commentTotal": 520,
    "comments": [
      {
        "commentId": 12345,
        "userNickname": "å½±è¿·å°ç‹",
        "commentContent": "è¿™éƒ¨ç”µå½±å¤ªæ„Ÿäººäº†ï¼Œç»å…¸ä¸­çš„ç»å…¸ï¼",
        "likeCount": 128,
        "rating": 5,
        "commentTime": "2019-06-15 20:30:00"
      },
      {
        "commentId": 12346,
        "userNickname": "ç”µå½±çˆ±å¥½è€…",
        "commentContent": "å¼ å›½è£çš„æ¼”æŠ€æ— äººèƒ½åŠ",
        "likeCount": 256,
        "rating": 5,
        "commentTime": "2019-05-20 14:22:30"
      }
    ]
  }
}
```

### é”™è¯¯å“åº”

```json
{
  "code": 404,
  "message": "ç”µå½±ä¸å­˜åœ¨",
  "data": null
}
```

---

## å››ã€ç”µå½±è¯„è®ºåˆ†é¡µ

`GET /comments/{movieId}`

### è·¯å¾„å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| movieId | Integer | ç”µå½±ID |

### Query å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| pageNum | Integer | å¦ | 1 | é¡µç ï¼ˆâ‰¥1ï¼‰ |
| pageSize | Integer | å¦ | 20 | æ¯é¡µæ¡æ•°ï¼ˆ1~200ï¼‰ |

### è¯·æ±‚ç¤ºä¾‹

```
GET /api/comments/1291546?pageNum=1&pageSize=10
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "total": 520,
  "pageNum": 1,
  "pageSize": 10,
  "data": [
    {
      "commentId": 1167353,
      "userNickname": "å¤§æ´",
      "commentContent": "è¿™æ˜¯ä¸€éƒ¨è®©äººåå¤è§‚çœ‹çš„ç”µå½±",
      "likeCount": 15,
      "rating": 5,
      "commentTime": "2019-08-10 18:45:00"
    },
    {
      "commentId": 1167354,
      "userNickname": "åŸæ¥æ˜¯ä¸ªæ¾é¼ ",
      "commentContent": "æ¼”æŠ€å¤ªå¥½äº†",
      "likeCount": 8,
      "rating": 4,
      "commentTime": "2019-07-02 10:28:11"
    }
  ]
}
```

---

## äº”ã€å·¥ä½œè€…è¯¦æƒ…

`GET /workers/{workerId}`

### è·¯å¾„å‚æ•°

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| workerId | Integer | å·¥ä½œè€…ID |

### è¯·æ±‚ç¤ºä¾‹

```
GET /api/workers/1003494
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "workerId": 1003494,
    "workerName": "å¼ å›½è£",
    "gender": "ç”·",
    "nameEn": "Leslie Cheung",
    "nameZh": "å¼ å›½è£",
    "birth": "1956-09-12 00:00:00",
    "birthplace": "ä¸­å›½,é¦™æ¸¯",
    "constellatory": "å¤„å¥³åº§",
    "profession": "æ¼”å‘˜/æ­Œæ‰‹",
    "biography": "å¼ å›½è£ï¼ˆ1956å¹´9æœˆ12æ—¥ï¼2003å¹´4æœˆ1æ—¥ï¼‰ï¼Œç”Ÿäºé¦™æ¸¯..."
  }
}
```

### é”™è¯¯å“åº”

```json
{
  "code": 404,
  "message": "å·¥ä½œè€…ä¸å­˜åœ¨",
  "data": null
}
```

---

## å…­ã€é€šç”¨é”™è¯¯å“åº”

### å‚æ•°æ ¡éªŒå¤±è´¥ï¼ˆ400ï¼‰

```json
{
  "code": 400,
  "message": "pageNum: é¡µç æœ€å°ä¸º1; pageSize: æ¯é¡µæ¡æ•°ä¸èƒ½ä¸ºç©º",
  "data": null
}
```

### æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼ˆ500ï¼‰

```json
{
  "code": 500,
  "message": "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯",
  "data": null
}
```
## ä¸ƒã€å¯ç­›é€‰çš„åœ°åŒºã€è¯­è¨€ã€ç±»å‹

### è·å–å¯ç­›é€‰çš„å›½å®¶æˆ–åœ°åŒºåˆ—è¡¨

`GET /movies/regions`

#### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": ["ä¸­å›½","ç¾å›½","æ—¥æœ¬","éŸ©å›½","è‹±å›½","æ³°å›½","å°åº¦","å¾·å›½","è¥¿ç­ç‰™","æ¾³å¤§åˆ©äºš"]
}
```

### è·å–å¯ç­›é€‰çš„ç”µå½±è¯­è¨€åˆ—è¡¨

`GET /movies/languages`

#### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": ["æ±‰è¯­æ™®é€šè¯","è‹±è¯­","æ—¥è¯­","è¥¿ç­ç‰™è¯­","è‘¡è„ç‰™è¯­","éŸ©è¯­","æ³°è¯­","å°åœ°è¯­","æ³•è¯­","å¾·è¯­","æ„å¤§åˆ©è¯­","ç²¤è¯­","æ‹‰ä¸è¯­","ä¿„è¯­","æŒªå¨è¯­","è·å…°è¯­","æ‰‹è¯­"]
}
```

### è·å–å¯ç­›é€‰çš„ç”µå½±ç±»å‹åˆ—è¡¨

`GET /movies/genres`

#### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": ["å–œå‰§","ç§‘å¹»","åŠ¨ä½œ","å¥‡å¹»","å†’é™©","æˆ˜äº‰","å‰§æƒ…","åŠ¨ç”»","çˆ±æƒ…","æ‚¬ç–‘","çŠ¯ç½ª","æƒŠæ‚š","ä¼ è®°","è¿åŠ¨","æ­Œèˆ","å®¶åº­","éŸ³ä¹","å†å²","ç¾éš¾","çœŸäººç§€","å‰§æƒ…","å¥‡å¹»","å†’é™©","å®¶åº­","çˆ±æƒ…","åŒæ€§","åŠ¨ä½œ","çŠ¯ç½ª","éŸ³ä¹","æƒŠæ‚š","åŠ¨ç”»","æ­Œèˆ","ç§‘å¹»","å–œå‰§","å„¿ç«¥","å†å²","æˆ˜äº‰","æ‚¬ç–‘","ä¼ è®°","è¥¿éƒ¨","ææ€–","å¤è£…","æ­¦ä¾ ","ç¾éš¾","é»‘è‰²ç”µå½±","è¿åŠ¨","æƒŠæ —","è’è¯","æ‚¬å¿µ","æˆæ›²","è®°å½•","Adult","Reality-TV","Comedy","çºªå½•ç‰‡","çŸ­ç‰‡","æ‡¸ç–‘ Mystery","èˆå°è‰ºæœ¯","é¬¼æ€ª","çœŸäººç§€","åŠ‡æƒ… Drama","é©šæ‚š Thriller","ç´€éŒ„ç‰‡ Documentary","éŸ³æ¨‚ Music","News","è„±å£ç§€","å‚³è¨˜ Biography","æ„›æƒ… Romance","å‹•ä½œ Action","Talk-Show","å‹•ç•« Animation","å…’ç«¥ Kids","å–œåŠ‡ Comedy","æ­·å² History"]
}
```
