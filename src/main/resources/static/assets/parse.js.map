{"version":3,"file":"parse.js","sources":["../../src/utils/parse.ts"],"sourcesContent":["/**\n * 工具函数模块\n * 包含演职人员解析、颜色哈希、日期格式化等通用方法\n */\n\n/** 演职人员信息 */\nexport interface WorkerInfo {\n    name: string\n    id: number\n}\n\n/** 预设颜色组 */\nconst COLORS = ['#60A84E', '#4a90d9', '#e67e22', '#9b59b6', '#e74c3c', '#1abc9c', '#f39c12', '#2980b9']\n\n/**\n * 解析 actorIds / directorIds 字段\n * 格式：\"姓名:id|姓名:id\" → [{name, id}]\n */\nexport function parseWorkerIds(str: string | null | undefined): WorkerInfo[] {\n    if (!str) return []\n    return str.split('|').map(item => {\n        const [name, id] = item.split(':')\n        return { name: name?.trim() || '', id: Number(id) || 0 }\n    }).filter(w => w.name && w.id)\n}\n\n/**\n * 根据 ID 哈希获取预设颜色\n */\nexport function hashColor(id: number | string): string {\n    return COLORS[Number(id) % COLORS.length]!\n}\n\n/**\n * 格式化日期（去掉时分秒，只保留 yyyy-MM-dd）\n */\nexport function formatDate(dateStr: string | null | undefined): string {\n    if (!dateStr) return ''\n    return dateStr.slice(0, 10)\n}\n\n/**\n * 获取名字首字（中文取第一个字，英文取首字母大写）\n */\nexport function getInitial(name: string): string {\n    if (!name) return '?'\n    const first = name.charAt(0)\n    // 判断是否为 ASCII 字母\n    if (/[a-zA-Z]/.test(first)) {\n        return first.toUpperCase()\n    }\n    return first\n}\n"],"names":[],"mappings":"AAYA,MAAM,SAAS,CAAC,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,SAAS;AAM/F,SAAS,eAAe,KAA8C;AACzE,MAAI,CAAC,IAAK,QAAO,CAAA;AACjB,SAAO,IAAI,MAAM,GAAG,EAAE,IAAI,CAAA,SAAQ;AAC9B,UAAM,CAAC,MAAM,EAAE,IAAI,KAAK,MAAM,GAAG;AACjC,WAAO,EAAE,MAAM,MAAM,KAAA,KAAU,IAAI,IAAI,OAAO,EAAE,KAAK,EAAA;AAAA,EACzD,CAAC,EAAE,OAAO,OAAK,EAAE,QAAQ,EAAE,EAAE;AACjC;AAKO,SAAS,UAAU,IAA6B;AACnD,SAAO,OAAO,OAAO,EAAE,IAAI,OAAO,MAAM;AAC5C;AAKO,SAAS,WAAW,SAA4C;AACnE,MAAI,CAAC,QAAS,QAAO;AACrB,SAAO,QAAQ,MAAM,GAAG,EAAE;AAC9B;AAKO,SAAS,WAAW,MAAsB;AAC7C,MAAI,CAAC,KAAM,QAAO;AAClB,QAAM,QAAQ,KAAK,OAAO,CAAC;AAE3B,MAAI,WAAW,KAAK,KAAK,GAAG;AACxB,WAAO,MAAM,YAAA;AAAA,EACjB;AACA,SAAO;AACX;"}