{"version":3,"file":"MovieCard.js","sources":["../../src/components/MovieCard.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { getPosterUrl } from '@/api/request'\n\nconst props = defineProps<{\n  movie: any\n}>()\n\nconst imgError = ref(false)\n\n// ÁîµÂΩ±Êµ∑Êä• URL\nconst posterUrl = computed(() => {\n  if (!props.movie?.cover || imgError.value) return ''\n  return getPosterUrl(props.movie.cover)\n})\n\n// ‰∏ªÊºîÔºàÊúÄÂ§ö3‰∫∫Ôºâ\nconst actors = computed(() => {\n  if (!props.movie?.actors) return ''\n  return props.movie.actors\n    .split('/')\n    .slice(0, 3)\n    .map((s: string) => s.trim())\n    .join(' / ')\n})\n\n// Á±ªÂûãÊ†áÁ≠æ\nconst types = computed(() => {\n  if (!props.movie?.type) return []\n  return props.movie.type.split('/').map((g: string) => g.trim()).filter(Boolean)\n})\n\nconst onImgError = () => {\n  imgError.value = true\n}\n</script>\n\n<template>\n  <router-link :to=\"`/movies/${movie.movieId}`\" class=\"movie-card\">\n    <div class=\"card-poster\">\n      <img\n        v-if=\"posterUrl\"\n        :src=\"posterUrl\"\n        :alt=\"movie.movieName\"\n        loading=\"lazy\"\n        @error=\"onImgError\"\n      />\n      <div v-else class=\"poster-placeholder\">\n        <span class=\"placeholder-icon\">üé¨</span>\n      </div>\n      <!-- Âè≥‰∏äËßíËØÑÂàÜ -->\n      <div v-if=\"movie.doubanScore\" class=\"card-score\">\n        <span class=\"score-star\">‚≠ê</span>\n        <span class=\"score-value\">{{ movie.doubanScore }}</span>\n      </div>\n    </div>\n    <div class=\"card-info\">\n      <h3 class=\"card-title\" :title=\"movie.movieName\">{{ movie.movieName }}</h3>\n      <p v-if=\"actors\" class=\"card-actors\">{{ actors }}</p>\n      <div class=\"card-meta\">\n        <div v-if=\"types.length\" class=\"card-types\">\n          <span v-for=\"g in types.slice(0, 2)\" :key=\"g\" class=\"tag-capsule\">{{ g }}</span>\n        </div>\n        <span v-if=\"movie.year\" class=\"card-year\">{{ movie.year }}</span>\n      </div>\n    </div>\n  </router-link>\n</template>\n\n<style scoped>\n.movie-card {\n  display: block;\n  background: var(--color-bg-card);\n  border-radius: var(--radius-card);\n  overflow: hidden;\n  transition: transform var(--transition), box-shadow var(--transition);\n  box-shadow: var(--shadow-card);\n}\n\n.movie-card:hover {\n  transform: translateY(-4px);\n  box-shadow: var(--shadow-card-hover);\n}\n\n.card-poster {\n  position: relative;\n  width: 100%;\n  aspect-ratio: 2 / 3;\n  overflow: hidden;\n  background: #252525;\n}\n\n.card-poster img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform var(--transition);\n}\n\n.movie-card:hover .card-poster img {\n  transform: scale(1.03);\n}\n\n.poster-placeholder {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #252525, #1a1a1a);\n}\n\n.placeholder-icon {\n  font-size: 48px;\n  opacity: 0.3;\n}\n\n.card-score {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  background: rgba(0, 0, 0, 0.75);\n  backdrop-filter: blur(4px);\n  padding: 4px 8px;\n  border-radius: var(--radius-sm);\n  display: flex;\n  align-items: center;\n  gap: 3px;\n}\n\n.score-star {\n  font-size: 11px;\n}\n\n.score-value {\n  color: var(--color-gold);\n  font-weight: 700;\n  font-size: 13px;\n}\n\n.card-info {\n  padding: 12px;\n}\n\n.card-title {\n  font-size: 14px;\n  font-weight: 600;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-bottom: 6px;\n}\n\n.card-actors {\n  font-size: 12px;\n  color: var(--color-text-muted);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-bottom: 8px;\n}\n\n.card-meta {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 8px;\n}\n\n.card-types {\n  display: flex;\n  gap: 4px;\n  overflow: hidden;\n}\n\n.card-types .tag-capsule {\n  font-size: 11px;\n  padding: 1px 7px;\n}\n\n.card-year {\n  font-size: 12px;\n  color: var(--color-text-muted);\n  white-space: nowrap;\n}\n</style>\n"],"names":["_createBlock","_createElementVNode","_createElementBlock","_openBlock","_toDisplayString","_Fragment","_renderList"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,UAAM,QAAQ;AAId,UAAM,WAAW,IAAI,KAAK;AAG1B,UAAM,YAAY,SAAS,MAAM;AAC/B,UAAI,CAAC,MAAM,OAAO,SAAS,SAAS,MAAO,QAAO;AAClD,aAAO,aAAa,MAAM,MAAM,KAAK;AAAA,IACvC,CAAC;AAGD,UAAM,SAAS,SAAS,MAAM;AAC5B,UAAI,CAAC,MAAM,OAAO,OAAQ,QAAO;AACjC,aAAO,MAAM,MAAM,OAChB,MAAM,GAAG,EACT,MAAM,GAAG,CAAC,EACV,IAAI,CAAC,MAAc,EAAE,MAAM,EAC3B,KAAK,KAAK;AAAA,IACf,CAAC;AAGD,UAAM,QAAQ,SAAS,MAAM;AAC3B,UAAI,CAAC,MAAM,OAAO,aAAa,CAAA;AAC/B,aAAO,MAAM,MAAM,KAAK,MAAM,GAAG,EAAE,IAAI,CAAC,MAAc,EAAE,KAAA,CAAM,EAAE,OAAO,OAAO;AAAA,IAChF,CAAC;AAED,UAAM,aAAa,MAAM;AACvB,eAAS,QAAQ;AAAA,IACnB;;;0BAIEA,YA4Bc,wBAAA;AAAA,QA5BA,IAAE,WAAa,QAAA,MAAM,OAAO;AAAA,QAAI,OAAM;AAAA,MAAA;yBAClD,MAgBM;AAAA,UAhBNC,gBAgBM,OAhBN,YAgBM;AAAA,YAdI,UAAA,sBADRC,mBAME,OAAA;AAAA;cAJC,KAAK,UAAA;AAAA,cACL,KAAK,QAAA,MAAM;AAAA,cACZ,SAAQ;AAAA,cACP,SAAO;AAAA,YAAA,6BAEVC,aAAAD,mBAEM,OAFN,YAEM,CAAA,GAAA,OAAA,CAAA,MAAA,OAAA,CAAA,IAAA;AAAA,cADJD,gBAAwC,QAAA,EAAlC,OAAM,mBAAA,GAAmB,MAAE,EAAA;AAAA,YAAA;YAGxB,QAAA,MAAM,eAAjBE,aAAAD,mBAGM,OAHN,YAGM;AAAA,cAFJ,OAAA,CAAA,MAAA,OAAA,CAAA,IAAAD,gBAAiC,QAAA,EAA3B,OAAM,aAAA,GAAa,KAAC,EAAA;AAAA,cAC1BA,gBAAwD,QAAxD,YAAwDG,gBAA3B,QAAA,MAAM,WAAW,GAAA,CAAA;AAAA,YAAA;;UAGlDH,gBASM,OATN,YASM;AAAA,YARJA,gBAA0E,MAAA;AAAA,cAAtE,OAAM;AAAA,cAAc,OAAO,QAAA,MAAM;AAAA,YAAA,GAAcG,gBAAA,QAAA,MAAM,SAAS,GAAA,GAAA,UAAA;AAAA,YACzD,OAAA,sBAATF,mBAAqD,KAArD,YAAqDE,gBAAb,OAAA,KAAM,GAAA,CAAA;YAC9CH,gBAKM,OALN,YAKM;AAAA,cAJO,MAAA,MAAM,UAAjBE,aAAAD,mBAEM,OAFN,aAEM;AAAA,iBADJC,UAAA,IAAA,GAAAD,mBAAgFG,UAAA,MAAAC,WAA9D,MAAA,MAAM,cAAX,MAAC;sCAAdJ,mBAAgF,QAAA;AAAA,oBAA1C,KAAK;AAAA,oBAAG,OAAM;AAAA,kBAAA,mBAAiB,CAAC,GAAA,CAAA;AAAA;;cAE5D,QAAA,MAAM,QAAlBC,UAAA,GAAAD,mBAAiE,QAAjE,aAAiEE,gBAApB,QAAA,MAAM,IAAI,GAAA,CAAA;;;;;;;;;;"}