{"version":3,"file":"movieStore.js","sources":["../../src/stores/movieStore.ts"],"sourcesContent":["/**\n * 电影数据 Store\n * 缓存电影列表、筛选参数、分页状态\n */\nimport { defineStore } from 'pinia'\nimport { ref } from 'vue'\n\nexport const useMovieStore = defineStore('movie', () => {\n    // 电影列表数据\n    const movies = ref<any[]>([])\n    const total = ref(0)\n    const totalPages = ref(0)\n    const loading = ref(false)\n\n    // 当前筛选参数快照（用于判断是否需要重新请求）\n    const lastParams = ref<string>('')\n\n    // 统计数据\n    const stats = ref<{\n        movieCount: number\n        commentCount: number\n        workerCount: number\n    } | null>(null)\n\n    function setMovies(data: any[], totalVal: number, totalPagesVal: number) {\n        movies.value = data\n        total.value = totalVal\n        totalPages.value = totalPagesVal\n    }\n\n    function setStats(data: { movieCount: number; commentCount: number; workerCount: number }) {\n        stats.value = data\n    }\n\n    function setLoading(val: boolean) {\n        loading.value = val\n    }\n\n    function setLastParams(params: string) {\n        lastParams.value = params\n    }\n\n    return {\n        movies,\n        total,\n        totalPages,\n        loading,\n        lastParams,\n        stats,\n        setMovies,\n        setStats,\n        setLoading,\n        setLastParams\n    }\n})\n"],"names":[],"mappings":";AAOO,MAAM,gBAAgB,YAAY,SAAS,MAAM;AAEpD,QAAM,SAAS,IAAW,EAAE;AAC5B,QAAM,QAAQ,IAAI,CAAC;AACnB,QAAM,aAAa,IAAI,CAAC;AACxB,QAAM,UAAU,IAAI,KAAK;AAGzB,QAAM,aAAa,IAAY,EAAE;AAGjC,QAAM,QAAQ,IAIJ,IAAI;AAEd,WAAS,UAAU,MAAa,UAAkB,eAAuB;AACrE,WAAO,QAAQ;AACf,UAAM,QAAQ;AACd,eAAW,QAAQ;AAAA,EACvB;AAEA,WAAS,SAAS,MAAyE;AACvF,UAAM,QAAQ;AAAA,EAClB;AAEA,WAAS,WAAW,KAAc;AAC9B,YAAQ,QAAQ;AAAA,EACpB;AAEA,WAAS,cAAc,QAAgB;AACnC,eAAW,QAAQ;AAAA,EACvB;AAEA,SAAO;AAAA,IACH;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAER,CAAC;"}